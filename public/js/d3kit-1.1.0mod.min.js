!function(t,n){"function"==typeof define&&define.amd?define(["d3"],n):"object"==typeof exports?module.exports=n(require("d3")):t.d3Kit=n(t.d3)}(this,function(t){var n;n=function(){var t=function(){function t(t,n,e){return t.on("click",n[e+"Click"]).on("mouseover",n[e+"MouseOver"]).on("mousemove",n[e+"MouseMove"]).on("mouseout",n[e+"MouseOut"])}function n(t,n){return n?t.selectAll("*").remove():t.selectAll("*").transition().style("opacity",0).remove()}function e(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function r(t){return e(t)?t:document.querySelector(t)}function i(t){return Array.isArray(t)?t:[].slice.call(document.querySelectorAll(t))}function o(t){t=t||{};for(var n=1;n<arguments.length;n++){var e=arguments[n];if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];!s(i)||Array.isArray(i)||d(i)?t[r]=i:t[r]=o(t[r],i)}}return t}function u(t){t=t||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var e in arguments[n])arguments[n].hasOwnProperty(e)&&(t[e]=arguments[n][e]);return t}function a(t,n,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent&&t.attachEvent("on"+n,e)}function c(t,n,e){t.removeEventListener(n,e,!1)}function f(t,n,e){var r,i=function(){var i=this,o=arguments,u=function(){r=null,e||t.apply(i,o)},a=e&&!r;return clearTimeout(r),r=setTimeout(u,n),a&&t.apply(i,o),i};return i.isDebounced=!0,i.now=function(){return clearTimeout(r),t.apply(this,arguments)},i}function s(t){return!(!t||!v[typeof t])}function l(t){return"number"==typeof t||t&&"object"==typeof t&&w.call(t)==b||!1}function d(t){var n={};return!!t&&"[object Function]"===n.toString.call(t)}function h(t){return null==t?"":String(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function p(t,n){return null==t?"":!n&&N?N.call(t):(n=E(n),String(t).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))}function g(t){return p(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}var m=Number.isNaN?Number.isNaN:window.isNaN,v={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},b="[object Number]",y=Object.prototype,w=y.toString,N=String.prototype.trim,E=function(t){return null==t?"\\s":t.source?t.source:"["+h(t)+"]"};return{$:r,$$:i,dasherize:g,debounce:f,deepExtend:o,extend:u,isElement:e,isFunction:d,isNaN:m,isNumber:l,isObject:s,on:a,off:c,trim:p,removeAllChildren:n,bindMouseEventsToDispatcher:t}}();return t}();var e;e=function(t){return function(n,e){function r(n,r,i){var o=i?i+"."+r:r;if(f.hasOwnProperty(o))throw"invalid or duplicate layer id: "+o;var u=n.append(e).classed(t.dasherize(r)+"-layer",!0);return f[o]=u,u}function i(n,e,o){if(Array.isArray(e))return e.map(function(t){i(n,t,o)});if(t.isObject(e)){var u=Object.keys(e)[0],a=r(n,u,o);return i(a,e[u],o?o+"."+u:u),a}return r(n,e,o)}function o(t){return i(n,t)}function u(t){return Array.isArray(t)?t.map(o):o(t)}function a(t){return f[t]}function c(t){return!!f[t]}var f={};return e=e||"g",{create:u,get:a,has:c}}}(n);var r;r=function(t,n,e){function r(r,u,a){function c(t,n){return 0===arguments.length?L:(L=t,n||G.data(t),D)}function f(t,n){return 0===arguments.length?M:(M=e.deepExtend(M,t),t&&(t.margin?l(n):t.offset&&s()),n||G.options(t),D)}function s(){q.attr("transform","translate("+(M.margin.left+M.offset[0])+","+(M.margin.top+M.offset[1])+")")}function l(t){s(),S=T-M.margin.left-M.margin.right,$=k-M.margin.top-M.margin.bottom,t||G.resize([T,k,S,$])}function d(t,n){return 0===arguments.length?M.margin:(M.margin=e.extend(M.margin,t),l(n),D)}function h(t){return 0===arguments.length?M.offset:(M.offset=t,s(),D)}function p(t,n){if(0===arguments.length||null===t||void 0===t)return T;if(T=e.isNumber(t)?+t:"auto"==t.trim().toLowerCase()?r.clientWidth:+(t+"").replace(/px/gi,"").trim(),e.isNaN(T))throw Error("invalid width: "+T);return T=Math.floor(T),S=T-M.margin.left-M.margin.right,W.attr("width",T),n||G.resize([T,k,S,$]),D}function g(t,n){if(0===arguments.length||null===t||void 0===t)return k;if(k=e.isNumber(t)?+t:"auto"==t.trim().toLowerCase()?r.clientHeight:+(t+"").replace(/px/gi,"").trim(),e.isNaN(k))throw Error("invalid height: "+k);return k=Math.floor(k),$=k-M.margin.top-M.margin.bottom,W.attr("height",k),n||G.resize([T,k,S,$]),D}function m(t,n){return 0===arguments.length?[T,k]:(p(t[0],!0),g(t[1],n),D)}function v(t){return 0===arguments.length?R:R!=t?E(t,F):D}function b(t){return 0===arguments.length?F:F!=t?E(R,t):D}function y(t){return 0===arguments.length?P:(P=null===t||void 0===t||""===t||t===!1||"false"===(t+"").toLowerCase()?!1:e.isNumber(t)?0===+t?!1:+t:!1,D)}function w(){if(H)switch(F){case"dom":e.off(r,"resize",H);break;default:case"window":e.off(window,"resize",H)}return H=null,D}function N(t){if(t)switch(F){case"dom":e.on(r,"resize",t);break;default:case"window":e.on(window,"resize",t)}return H=t,D}function E(t,n){if(t=t&&"false"==(t+"").toLowerCase()?!1:t,n=n||F,t!=R)w(),R=t,F=n,t&&(H=e.debounce(function(){P?(A(R,!0),O(P)):A(R)},100),N(H));else if(n!=F){var r=H;w(),F=n,N(r)}return H&&H(),D}function x(){return Object.keys(G).filter(function(t){return o.indexOf(t)<0})}function z(t){var n=D;return e.isObject(t)&&Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function A(t,n){switch(t){case"all":case"full":case"both":m(["auto","auto"],n);break;case"height":g("auto",n);break;default:case"width":p("auto",n)}return D}function O(t,n){var r=T,i=k;if(!e.isNumber(t))throw"Invalid ratio: must be a Number";if(t=+t,(r/i).toFixed(4)==t.toFixed(4))return D;var o=Math.floor(r/t);return o>i?(g(o,n),p(Math.floor(o*t),n)):g(o,n),D}function j(){return null!==L&&void 0!==L}function C(){return S>0&&$>0}var D={};r=e.$(r);var L=null,M=e.deepExtend({},i,u),T=0,k=0,S=0,$=0,F="window",R=!1,H=null,P=!1,W=t.select(r).append("svg"),q=W.append("g");s();var I=new n(q),Z=a?a.concat(o):o,G=t.dispatch.apply(t,Z);return m([M.initialWidth,M.initialHeight]),e.extend(D,{getCustomEventNames:x,getDispatcher:function(){return G},getInnerWidth:function(){return S},getInnerHeight:function(){return $},getLayerOrganizer:function(){return I},getRootG:function(){return q},getSvg:function(){return W},data:c,options:f,margin:d,offset:h,width:p,height:g,dimension:m,autoResize:v,autoResizeDetection:b,autoResizeToAspectRatio:y,hasData:j,hasNonZeroArea:C,mixin:z,resizeToFitContainer:A,resizeToAspectRatio:O}),t.rebind(D,G,"on"),D}var i={margin:{top:30,right:30,bottom:30,left:30},offset:[.5,.5],initialWidth:720,initialHeight:500},o=["data","options","resize"];return r}(t,e,n);var i;i=function(t,n){var e=function(){function e(e,r,i){var o=function(o,u){var a=new t(o,n.deepExtend({},e,u),r);return i&&i(a),a};return r=r?r:[],o.getCustomEvents=function(){return r},o}return{createChart:e}}();return e}(r,n);var o;o=function(t,n){function e(t,n){n()}function r(r,i,o,u){function a(n,e){return arguments.length>1?(p[n]=t.functor(e),this):t.functor(p[n])}function c(t,n,e){return a(t)(n,e)}function f(t,e){return function(r){t(r,n.debounce(function(t,n){var i=g[e];i&&i(r)}),5)}}function s(t,n,e){return p[e||n]=function(e,r){return t.property(n)(e,r)},this}function l(t,n,e){return n.forEach(function(n,r){s(t,n,e&&r<e.length?e[r]:void 0)}),this}function d(t){return u.forEach(function(n){g.on(n,t[n])}),this}function h(){return u}i=i||e,o=o||e,u=u||[];var p={},g=t.dispatch.apply(t,["enterDone","updateDone","exitDone"].concat(u)),m={getDispatcher:function(){return g},getPropertyValue:c,inheritPropertyFrom:s,inheritPropertiesFrom:l,publishEventsTo:d,getCustomEventNames:h,property:a,enter:f(r,"enterDone"),update:f(i,"updateDone"),exit:f(o,"exitDone")};return t.rebind(m,g,"on"),m}return r}(t,n);var u;return u=function(t,n,e,r,i){return{factory:t,helper:n,Skeleton:e,LayerOrganizer:r,Chartlet:i}}(i,n,r,e,o)});